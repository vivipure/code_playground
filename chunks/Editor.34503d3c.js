import{a as i,j as g,o as f,g as d,t as m,u as S}from"./web.678fa43f.js";import{m as C,c as E}from"./monaco.ebf98771.js";function y(e,l){const o=localStorage.getItem(e),u=o?JSON.parse(o):l,[t,s]=i(u);return[t,a=>{try{const n=a instanceof Function?a(t()):a;localStorage.setItem(e,JSON.stringify(n)),s(n)}catch(n){console.log(n)}}]}const h=m('<div class="h-full w-full"></div>');function M(e){let{language:l="typescript",value:o=""}=e,u,t,s=!1;g(()=>{(e.language!==l||e.value!==o)&&(console.log("\u6211\u88AB\u89E6\u53D1\u4E86"),s=!0,r(e.value||"",e.language)),l=e.language,o=e.value});function r(a,n){const c=t?.getModel();C.editor.setModelLanguage(c,n),t?.setValue(a)}return f(()=>{t=E(u,{language:l,value:o}),window.onresize=()=>{t.layout()},t.onDidContentSizeChange(()=>{t.layout()}),e.onChange&&t.onDidChangeModelContent(a=>{if(s){s=!1;return}o=t.getValue(),e.onChange(o,a)})}),(()=>{const a=d(h),n=u;return typeof n=="function"?S(n,a):u=a,a})()}export{M as E,y as u};
